<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vehicle Logos</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background-color: #f5f5f5;
        margin: 0;
      }

      .container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 15px;
        width: 100%;
        padding: 20px;
      }

      .logo-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 10px;
        border-radius: 10px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        text-align: center;
        animation: colorChange 18s infinite alternate ease-in-out;
      }

      .logo-card img {
        width: 60px;
        height: 40px;
      }

      .logo-card span {
        margin-top: 5px;
        font-size: 12px;
        font-weight: bold;
      }
      @keyframes colorChange {
        0% {
          background: rgb(146, 0, 0);
        } /* Vermelho escuro */
        25% {
          background: rgb(0, 80, 146);
        } /* Azul escuro */
        50% {
          background: rgb(0, 146, 80);
        } /* Verde escuro */
        75% {
          background: rgb(146, 80, 0);
        } /* Laranja escuro */
        100% {
          background: rgb(146, 0, 0);
        } /* Volta ao início */
      }
      /* Estilos para a barra de progresso */
      .progress-bar-container {
        width: 100%;
        height: 10px;
        background-color: #e0e0e0;
        position: absolute;
        top: 0;
        left: 0;
        z-index: 1000;
      }

      .progress-bar {
        width: 0;
        height: 100%;
        background-color: #76c7c0;
        transition: width 0.2s ease-in-out;
      }
      #progressText {
        color: black;
        font-weight: bold;
        text-shadow: 1px 1px 2px rgba(0, 0, 0);
      }
    </style>
  </head>
  <body>
    <div class="progress-bar-container" style="position: fixed">
      <div class="progress-bar" id="progressBar">
        <span
          id="progressText"
          style="
            position: absolute;
            width: 100%;
            text-align: center;
            color: white;
            font-weight: bold;
            top: 50%;
            transform: translateY(-50%);
          "
          >0/0</span
        >
        <br />

        <button onclick="baixarLogos()">↓</button>
        <br />
      </div>
    </div>
    <div class="container" id="logoGrid"></div>
    <script>
      const logos = [
        "Acura",
        "Adly",
        "Agrale",
        "Alfa Romeo",
        "Am Gen",
        "Amazonas",
        "Aprilia",
        "Asia Motors",
        "Aston Martin",
        "Atala",
        "Audi",
        "Avelloz",
        "Baby",
        "Bajaj",
        "Bee",
        "Benelli",
        "Bepobus",
        "Beta",
        "Bimota",
        "BMW",
        "Brandy",
        "Brava",
        "BRM",
        "BRP",
        "Buell",
        "Bueno",
        "Buggy",
        "Bugre",
        "Bull",
        "Bycristo",
        "BYD",
        "CAB Motors",
        "Cadillac",
        "Cagiva",
        "Caloi",
        "Caoa Chery",
        "Caoa Chery-Chery",
        "CBT Jipe",
        "Chana",
        "Changan",
        "Chevrolet",
        "Chrysler",
        "Ciccobus",
        "Citroën",
        "Cross Lander",
        "D2D Motors",
        "Daelim",
        "Daewoo",
        "DAF",
        "Dafra",
        "Daihatsu",
        "Dayang",
        "Dayun",
        "Derbi",
        "DFSK",
        "Dodge",
        "Ducati",
        "Effa",
        "Effa-JMC",
        "Emme",
        "Engesa",
        "Envemo",
        "Ferrari",
        "Fever",
        "Fiat",
        "Fibravan",
        "Ford",
        "Foton",
        "Fox",
        "Fusco Motosegura",
        "Fyber",
        "FYM",
        "Garinni",
        "Gas Gas",
        "Geely",
        "GM-Chevrolet",
        "GMC",
        "Great Wall",
        "Green",
        "Gurgel",
        "GWM",
        "Hafei",
        "Haobao",
        "Haojue",
        "Harley-Davidson",
        "Hartford",
        "Hero",
        "Hitech Electric",
        "Honda",
        "Husaberg",
        "Husqvarna",
        "Hyundai",
        "Indian",
        "Iros",
        "Isuzu",
        "Iveco",
        "JAC",
        "Jaguar",
        "Jeep",
        "Jiapeng Volcano",
        "Jinbei",
        "Johnnypag",
        "Jonny",
        "JPX",
        "Kahena",
        "Kasinski",
        "Kawasaki",
        "Kia Motors",
        "Kimco",
        "KTM",
        "Kymco",
        "L'Aquila",
        "Lada",
        "Lamborghini",
        "Land Rover",
        "Landum",
        "Lavrale",
        "Lerivo",
        "Lexus",
        "Lifan",
        "Lobini",
        "Lon-V",
        "Lotus",
        "Magrão Triciclos",
        "Mahindra",
        "Malaguti",
        "MAN",
        "Marcopolo",
        "Mascarello",
        "Maserati",
        "Matra",
        "Maxibus",
        "Mazda",
        "McLaren",
        "Mercedes-Benz",
        "Mercury",
        "MG",
        "Mini",
        "Mitsubishi",
        "Miura",
        "Miza",
        "Moto Guzzi",
        "Motocar",
        "Motorino",
        "MRX",
        "MV Agusta",
        "MVK",
        "Navistar",
        "Neobus",
        "Nissan",
        "Niu",
        "Orca",
        "Pegassi",
        "Peugeot",
        "Piaggio",
        "Plymouth",
        "Polaris",
        "Pontiac",
        "Porsche",
        "Puma-Alfa",
        "RAM",
        "Regal Partor",
        "Regal Raptor",
        "Regal Rartor",
        "Rely",
        "Renault",
        "Riguete",
        "Rolls-Royce",
        "Rover",
        "Royal Enfield",
        "Saab",
        "Saab-Scania",
        "Sanyang",
        "Saturn",
        "Scania",
        "Seat",
        "Seres",
        "Shacman",
        "Shineray",
        "Siamoto",
        "Sinotruk",
        "Smart",
        "SsangYong",
        "Subaru",
        "Sundown",
        "Super Soco",
        "Suzuki",
        "TAC",
        "Targos",
        "Tiger",
        "Toyota",
        "Traxx",
        "Triumph",
        "Troller",
        "Ventane Motors",
        "Vento",
        "Volkswagen",
        "Voltz",
        "Volvo",
        "VW-Volkswagen",
        "Wake",
        "Walk",
        "Walkbus",
        "Watts",
        "Wuyang",
        "Yamaha",
        "Zontes",
      ].map((name) => ({
        name,
        src: `logos/${name.toLowerCase().replace(/[\s\/]/g, "-")}.svg`,
      }));

      const logoGrid = document.getElementById("logoGrid");
      const progressBar = document.getElementById("progressBar");

      let totalLogos = logos.length;
      let loadedLogos = 0;
      let logosComImagem = [];
      let logosSemImagem = [];

      // Função para atualizar a barra de progresso
      function updateProgressBar(progress) {
        progressBar.style.width = `${progress}%`;
        document.getElementById(
          "progressText"
        ).textContent = `${loadedLogos}/${totalLogos}`;
      }

      // Função para verificar se a imagem existe
      function imageExists(logo) {
        return new Promise((resolve) => {
          const img = new Image();
          img.onload = () => resolve({ logo, exists: true });
          img.onerror = () => resolve({ logo, exists: false });
          img.src = logo.src;
        });
      }

      // Função para criar o card do logo
      function createLogoCard(logo, exists) {
        const card = document.createElement("div");
        card.classList.add("logo-card");

        if (exists) {
          card.innerHTML = `
      <img src="${logo.src}" alt="${logo.name}">
      <span>${logo.name}</span>
    `;
        } else {
          card.innerHTML = `
      <div style="width: 60px; height: 40px; background-color: #ccc;"></div>
      <span>${logo.name}</span>
    `;
        }

        return card;
      }

      // Função para carregar os logos
      async function loadLogos() {
        const checks = await Promise.all(logos.map(imageExists));

        checks.forEach(({ logo, exists }) => {
          if (exists) {
            logosComImagem.push(logo);
            loadedLogos++;
          } else {
            logosSemImagem.push(logo);
          }
        });

        // Adiciona os logos com imagem primeiro
        logosComImagem.forEach((logo) =>
          logoGrid.appendChild(createLogoCard(logo, true))
        );

        // Depois adiciona os logos sem imagem
        logosSemImagem.forEach((logo) =>
          logoGrid.appendChild(createLogoCard(logo, false))
        );

        // Atualiza a barra de progresso apenas para os carregados corretamente
        const progress = (loadedLogos / totalLogos) * 100;
        updateProgressBar(progress);
      }

      // Iniciar o carregamento dos logos
      loadLogos();
      function baixarLogos() {
        window.location.href = "/api/download";
      }
    </script>
  </body>
</html>
